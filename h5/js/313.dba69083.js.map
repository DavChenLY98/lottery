{"version":3,"file":"js/313.dba69083.js","mappings":"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","sources":["webpack://activity/./src/views/detail/index.vue","webpack://activity/./src/components/detail/activity.vue","webpack://activity/src/components/detail/activity.vue","webpack://activity/./src/components/detail/activity.vue?602d","webpack://activity/./src/components/detail/activity.vue?04f7","webpack://activity/src/views/detail/index.vue","webpack://activity/./src/views/detail/index.vue?d689","webpack://activity/./src/views/detail/index.vue?7792","webpack://activity/./src/assets/detail/ sync ^\\.\\/icon\\-.*\\.png$"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('main',{staticClass:\"detail-page\"},[_c('GoBack'),(_vm.info.status === 2)?_c('Activity',{attrs:{\"remainder\":_vm.remainder},on:{\"activityEndFun\":_vm.activityEndFun}}):_vm._e(),(_vm.info.status === 0)?_c('div',{staticClass:\"status-mask\"},[_c('div',{staticClass:\"card-box not-start\"},[_c('img',{attrs:{\"src\":require(\"../../assets/detail/pic-not-start.png\"),\"alt\":\"\"}}),_c('p',[_vm._v(\"开始时间\")]),_c('p',[_vm._v(_vm._s(_vm.info.startTimeStr))])])]):_vm._e(),(_vm.info.status === 1)?_c('div',{staticClass:\"status-mask\"},[_vm._m(0)]):_vm._e(),_c('div',{staticClass:\"right-float\"},[(_vm.info.status === 2)?_c('p',{on:{\"click\":_vm.openMyPrizeFun}},[_vm._v(\"我的奖品\")]):_vm._e(),_c('p',{on:{\"click\":_vm.toRule}},[_vm._v(\"活动规则\")])]),_c('div',{staticClass:\"page-footer\",class:_vm.info.status === 1 || _vm.info.status === 2 ? 'ended' : 'not-start'}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.myPrizeFlag),expression:\"myPrizeFlag\"}],staticClass:\"my-prize-mask\"},[_c('div',{staticClass:\"my-prize-cont\"},[_c('div',{staticClass:\"popup-title\"},[_vm._v(\"我的奖品\")]),_c('i',{staticClass:\"popup-close\",on:{\"click\":function($event){_vm.myPrizeFlag = false}}}),_c('div',{staticClass:\"popup-cont-mask\"},[(_vm.myPrizeList && _vm.myPrizeList.length > 0)?_c('ul',{staticClass:\"prize-list\"},_vm._l((_vm.myPrizeList),function(item){return _c('li',{key:item.id},[_c('span',[_vm._v(_vm._s(item.name || '-'))]),_c('span',[_vm._v(_vm._s(item.hittime ? item.hittime.slice(0, 11) : '-'))])])}),0):_c('div',{staticClass:\"default-page\"},[_c('p',[_vm._v(\"很遗憾，您未中奖\")])])])])])],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"card-box ended\"},[_c('img',{attrs:{\"src\":require(\"../../assets/detail/pic-ended.png\"),\"alt\":\"\"}}),_c('p',[_vm._v(\"活动已结束\")])])\n}]\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"activity-cont\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.countdownFlag),expression:\"countdownFlag\"}],staticClass:\"countdown-mask\"},[_c('div',{staticClass:\"countdown-cont\"},[_c('img',{staticClass:\"countdown-title\",attrs:{\"src\":require(\"../../assets/detail/pic-countdown.png\"),\"alt\":\"\"}}),_c('img',{staticClass:\"countdown-num\",attrs:{\"src\":require(`../../assets/detail/icon-${_vm.countdownIndex}.png`),\"alt\":\"\"}})])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.countdownFlag),expression:\"!countdownFlag\"}],staticClass:\"remainder\"},[_c('h1',[_vm._v(\"剩余时间\")]),_c('p',[_vm._v(_vm._s(_vm.remainderTime)),_c('span',[_vm._v(\"s\")])])]),(!_vm.countdownFlag)?_c('div',{ref:\"gameCont\",staticClass:\"game-cont\"},_vm._l((_vm.gameList),function(item){return _c('div',{key:item.id,staticClass:\"envelope-item\",style:({\n        left: item.left,\n        transform: `scale(${item.scale}) rotate(${item.rotate}deg)`\n      }),on:{\"click\":function($event){return _vm.receiveFun(item, $event)}}})}),0):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"activity-cont\">\n    <!-- 倒计时开始活动 -->\n    <div class=\"countdown-mask\" v-show=\"countdownFlag\">\n      <div class=\"countdown-cont\">\n        <img class=\"countdown-title\" src=\"../../assets/detail/pic-countdown.png\" alt=\"\">\n        <img class=\"countdown-num\" :src=\"require(`../../assets/detail/icon-${countdownIndex}.png`)\" alt=\"\">\n      </div>\n    </div>\n\n    <!-- 活动剩余时间 -->\n    <div class=\"remainder\" v-show=\"!countdownFlag\">\n      <h1>剩余时间</h1>\n      <p>{{ remainderTime }}<span>s</span></p>\n    </div>\n\n    <!-- 红包雨 -->\n    <div class=\"game-cont\" v-if=\"!countdownFlag\" ref=\"gameCont\">\n      <div class=\"envelope-item\" \n        v-for=\"item in gameList\" \n        :key=\"item.id\" \n        @click=\"receiveFun(item, $event)\"\n        :style=\"{\n          left: item.left,\n          transform: `scale(${item.scale}) rotate(${item.rotate}deg)`\n        }\"\n        ></div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport axios from 'axios';\nimport { Vue, Prop, Component } from 'vue-property-decorator';\n\n@Component\nexport default class Activity extends Vue {\n  userInfo: any = {} // 用户信息\n  countdownFlag = false\n  countdownTime: any = null\n  countdownIndex = 1\n  gameList: any = []\n  currIndex = 1 // 红包id\n  remainderTime = 0 // 活动剩余时间\n  time: any = null\n  @Prop() readonly remainder: any;\n\n\n  mounted() {\n    this.getUserInfo()\n  }\n\n  beforeDestroy(){\n    // 组件销毁清空定时器\n    clearInterval(this.countdownTime)\n    this.countdownTime = null\n    clearInterval(this.time)\n    this.time = null\n  }\n\n  // \n  getUserInfo () {\n    axios\n      .get(\n        `/user/info`,\n      )\n      .then((res: any) => {\n        if (res.data.code === 1) {\n          // 用户已登录\n          const { data } = res.data\n          this.userInfo = data\n\n          if (!localStorage.getItem(`${data.id}-${this.$route.query.id}`)) {\n            // 倒计时\n            this.countdownFun()\n            // 保存用户不是初次进入标识\n            localStorage.setItem(`${data.id}-${this.$route.query.id}`, 'true')\n          } else {\n            // 红包雨\n            this.gameFun()\n          }\n\n        } else { \n          // 未登录，跳转登录\n          this.$router.push({\n            name: 'login'\n          })\n        }\n      })\n  }\n\n  // 红包雨\n  gameFun(){\n    // 活动倒计时开始\n    this.getActivityTime(this.remainder)\n\n    // 添加红包\n    this.countdownTime = setInterval(()=>{\n      const delId = this.currIndex\n      // 创建红包\n      let item = {\n        id: this.currIndex,\n        rotate: Math.floor(Math.random() * 100 - 50), // 倾斜角度\n        left: Math.floor(Math.random() * 600) / 75 + 'rem', // 定位\n        scale: Math.random() * 0.65 + 0.65\n      }\n      // 放进红包数组\n      this.gameList.push(item)\n\n      // 两秒后销毁（下落动画2s）\n      setTimeout(()=>{\n        this.gameList = this.gameList.filter((v1: any) => {\n          return v1.id !== delId\n        })\n      }, 2000)\n\n      this.currIndex++\n    }, 400)\n  }\n\n\n  // 活动结束倒计时  num剩余的毫秒数\n  getActivityTime(num: number){\n    this.remainderTime = Math.ceil(num / 1000)\n    this.time = setInterval(()=>{\n      this.remainderTime--\n\n      // 倒计时为0时，活动结束\n      if(this.remainderTime === 0){\n        clearInterval(this.countdownTime)\n        this.countdownTime = null\n        clearInterval(this.time)\n        this.time = null\n        // 触发活动结束事件\n        this.$emit('activityEndFun')\n      }\n    }, 1000)\n  }\n\n  // 领取奖品\n  receiveFun(item: any, event: any){\n\n \n    axios\n      .get(\n        `act/go/${this.$route.query.id}`,\n      )\n      .then((res: any) => {\n        if (res.data.code === 1) {\n          const { data } = res.data\n          // 用户已登录\n          const receiveDom = event.target\n          receiveDom.style.animation = ''\n          const gameCont = document.getElementsByClassName('game-cont')[0]\n          const newDom = document.createElement(\"div\")\n          newDom.className = 'receive-tips'\n          newDom.style.top = receiveDom.offsetTop + 'px'\n          newDom.style.left = receiveDom.offsetLeft + 'px'\n          newDom.innerHTML = data.name\n          gameCont.appendChild(newDom)\n\n          setTimeout(()=>{\n            gameCont.removeChild(newDom)\n          }, 1000)\n          this.gameList = this.gameList.filter((v1: any) => {\n            return v1.id !== item.id\n          })\n        } else { \n          // 未登录，跳转登录\n          this.$router.push({\n            name: 'login'\n          })\n        }\n      })\n  }\n\n  // 倒计时逻辑\n  countdownFun(){\n    \n    if(this.countdownIndex == 4){\n      setTimeout(()=>{\n        this.countdownTime = null\n        this.countdownFlag = false\n        this.gameFun()\n      },1000)\n    }else{\n      this.countdownFlag = true\n      setTimeout(()=>{\n        this.countdownIndex++\n        this.countdownFun()\n      }, 1000)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.activity-cont{\n  .countdown-mask{\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(0, 0, 0, .6);\n    z-index: 1;\n    .countdown-cont{\n      position: absolute;\n      top: 50%;\n      left: 0;\n      height: calc(288px + 143px + 205px);\n      transform: translateY(-50%);\n      text-align: center;\n      .countdown-title{\n        width: 638px;\n        height: 288px;\n        margin-bottom: 148px;\n      }\n      .countdown-num{\n        width: 205px;\n        height: 205px;\n      }\n    }\n  }\n\n  .remainder{\n    position: fixed;\n    top: 185px; \n    left: 0;\n    width: 100%;\n    h1{\n      font-family: SourceHanSansCN-Medium;\n      font-size: 60px;\n      font-weight: normal;\n      font-stretch: normal;\n      line-height: 60px;\n      letter-spacing: 3px;\n      color: #ffeddb;\n      text-align: center;\n    }\n    p{\n      margin-top: 20px;\n      font-family: SourceHanSansCN-Heavy;\n      font-size: 96px;\n      font-weight: normal;\n      font-stretch: normal;\n      line-height: 96px;\n      letter-spacing: 0px;\n      color: #ffeddb;\n      text-align: center;\n      span{\n        font-size: 66px;\n      }\n    }\n  }\n  \n  .game-cont{\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    top:0;\n    left:0;\n    z-index: 2;\n    .envelope-item{\n      width: 123px;\n      height: 163px;\n      position: absolute;\n      z-index: 2;\n      top: 10;\n      animation-name: move;\n      animation-timing-function: ease-out;\n      animation-duration: 2.5s;\n      animation-fill-mode: forwards;\n      \n      background-image: url(../../assets/detail/icon-prize.png);\n      background-size: 100% 100%;\n    }\n\n    @keyframes move {\n      0%{\n        top: 0;\n      }\n      100%{\n        top: 110%;\n      }\n    }\n\n    ::v-deep .receive-tips{\n      position: absolute;\n      z-index: 1;\n      animation-name: receivetTips;\n      animation-timing-function: ease-out;\n      animation-duration: 1s;\n      animation-fill-mode: forwards;\n      font-family: SourceHanSansCN-Bold;\n      font-size: 32px;\n      font-weight: normal;\n      font-stretch: normal;\n      line-height: 32px;\n      letter-spacing: 0px;\n      color: #fff2e5;\n      width: 260px;\n      height: 80px;\n      padding: 23px 51px 0 17px;\n      box-sizing: border-box;\n      background-image: url(../../assets/detail/receice-tips.png);\n      background-size: 100% 100%;\n      text-align: center;\n      text-overflow:ellipsis;  \n      overflow: hidden;  \n      white-space: nowrap;\n    }\n\n    @keyframes receivetTips {\n      0%{\n        opacity: 1;\n        transform: translateY(0px);\n      }\n      100%{\n        opacity: 0;\n        transform: translateY(-30px);\n      }\n    }\n  }\n}\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[2]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./activity.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[2]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./activity.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./activity.vue?vue&type=template&id=7fbd1f70&scoped=true\"\nimport script from \"./activity.vue?vue&type=script&lang=ts\"\nexport * from \"./activity.vue?vue&type=script&lang=ts\"\nimport style0 from \"./activity.vue?vue&type=style&index=0&id=7fbd1f70&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7fbd1f70\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <main class=\"detail-page\">\n    <GoBack />\n    <!-- 红包雨活动 -->\n    <Activity v-if=\"info.status === 2\" :remainder=\"remainder\" @activityEndFun=\"activityEndFun\"/>\n    <!-- 活动未开始 -->\n    <div class=\"status-mask\" v-if=\"info.status === 0\">\n      <div class=\"card-box not-start\">\n        <img src=\"../../assets/detail/pic-not-start.png\" alt=\"\">\n        <p>开始时间</p>\n        <p>{{ info.startTimeStr }}</p>\n      </div>\n    </div>\n    <!-- 活动已结束 -->\n    <div class=\"status-mask\" v-if=\"info.status === 1\">\n      <div class=\"card-box ended\">\n        <img src=\"../../assets/detail/pic-ended.png\" alt=\"\">\n        <p>活动已结束</p>\n      </div>\n    </div>\n\n    <!-- 我的商品、活动规则 -->\n    <div class=\"right-float\">\n      <p v-if=\"info.status === 2\" @click=\"openMyPrizeFun\">我的奖品</p>\n      <p @click=\"toRule\">活动规则</p>\n    </div>\n\n\n    <!-- 底部云朵、钱袋 -->\n    <div class=\"page-footer\" :class=\"info.status === 1 || info.status === 2 ? 'ended' : 'not-start'\"></div>\n\n    <!-- 我的商品 -->\n    <div class=\"my-prize-mask\" v-show=\"myPrizeFlag\">\n      <div class=\"my-prize-cont\">\n        <div class=\"popup-title\">我的奖品</div>\n        <i class=\"popup-close\" @click=\"myPrizeFlag = false\"></i>\n        <div class=\"popup-cont-mask\">\n          <ul class=\"prize-list\" v-if=\"myPrizeList && myPrizeList.length > 0\">\n            <li v-for=\"item in myPrizeList\" :key=\"item.id\">\n              <span>{{ item.name || '-' }}</span>\n              <span>{{ item.hittime ? item.hittime.slice(0, 11) : '-' }}</span>\n            </li>\n          </ul>\n          <div class=\"default-page\" v-else>\n            <p>很遗憾，您未中奖</p>\n          </div>\n        </div>\n      </div>\n    </div>\n  </main>\n</template>\n\n<script lang=\"ts\">\nimport axios from 'axios';\nimport { Component, Vue } from 'vue-property-decorator';\nimport Activity from '@/components/detail/activity.vue'\nimport GoBack from '@/components/layout/GoBack.vue'\nimport moment from 'moment'\n\n@Component({\n  components: {\n    Activity,\n    GoBack\n  }\n})\nexport default class Detail extends Vue {\n  \n  info: any = {} // info.status 0-未开始 1-已结束 2-进行中\n  currId = this.$route.query.id // 活动id\n  myPrizeFlag = false\n  myPrizeList: any = [] // 我的奖品\n  remainder = 0\n\n  mounted(){\n    if (this.currId) {\n      this.getGameInfo()\n    } else {\n      this.$router.push('/')\n    }\n  }\n\n  // 获取活动详情\n  getGameInfo () {\n    axios\n      .get(`/game/info/${this.currId}`)\n      .then((res: any) => {\n        if (res.data.code === 1) {\n          const { data, now } = res.data\n          const currTime = new Date(now).getTime()\n          const startTime = new Date(data.starttime).getTime()\n          const endTime = new Date(data.endtime).getTime()\n          this.remainder = endTime - currTime\n          if( data.status === 1 ){\n            if( currTime >= startTime && currTime < endTime )\n            data.status = 2\n          }\n          data.startTimeStr = moment(data.starttime).format('YYYY年MM月DD日 HH:mm:ss')\n          this.info = data\n        }\n      })\n  }\n\n  // 打开我的商品\n  openMyPrizeFun () {\n    this.myPrizeFlag = true\n    axios\n      .get(\n        `/user/hit/-1/1/100`,\n      )\n      .then((res: any) => {\n        if (res.data.code === 1) {\n          const { data } = res.data\n          if(data.totalNum && data.items.length > 0){\n            // 接口数据处理，倒序显示最新奖品\n            this.myPrizeList = data.items\n          }\n        }\n      })\n  }\n\n  // 活动规则\n  toRule (){\n    this.$router.push({\n      name: 'rule',\n      query: {\n        id: this.currId\n      }\n    })\n  }\n\n  // 活动结束回调\n  activityEndFun (){\n    this.info.status = 1\n  }\n}\n</script>\n<style lang=\"scss\" scoped>\n.detail-page{\n  height: 100%;\n  background-image: url(../../assets/detail/detail-bg.png);\n  background-size: 100% auto;\n  background-repeat: no-repeat;\n  background-color: #ffeed5;\n  position: relative;\n  \n  .status-mask{\n    width: 100%;\n    height: 100%;\n    position: fixed;\n    z-index:2;\n    top: 0;\n    left: 0;\n    background-color: rgba(0, 0, 0, .6);\n    .card-box{\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n      width: 560px;\n      height: 560px;\n      background-color: #fff4eb;\n      border-radius: 50px;\n      box-sizing: border-box;\n      text-align: center;\n      p{\n        font-family: SourceHanSansCN-Medium;\n        font-weight: normal;\n        font-stretch: normal;\n        line-height: 46px;\n        letter-spacing: 0px;\n        color: #ff2b39;\n      }\n      &.not-start{\n        padding-top: 103px;\n        img{\n          width: 271px;\n          transform: translateX(8.5px);\n          margin-bottom: 61px;\n        }\n        p{\n          font-size: 36px;\n        }\n      }\n      &.ended{\n        padding-top: 86px;\n        img{\n          width: 291px;\n          transform: translateX(18.5px);\n          margin-bottom: 70px;\n        }\n        p{\n          font-family: SourceHanSansCN-Heavy;\n          font-size: 44px;\n          font-weight: 600;\n        }\n      }\n    }\n  }\n\n  .right-float{\n    position: fixed;\n    right: 0;\n    bottom: 371px;\n    width: 200px;\n    z-index: 3;\n    p{\n      width: 200px;\n      height: 72px;\n      text-align: center;\n      background-color: #f94823;\n      border-radius: 36px 0px 0px 36px;\n      margin-top: 32px;\n      font-family: SourceHanSansCN-Heavy;\n      font-size: 32px;\n      font-weight: normal;\n      font-stretch: normal;\n      line-height: 72px;\n      letter-spacing: 2px;\n      color: #ffeddb;\n    }\n  }\n\n  .page-footer{\n    position: fixed;\n    z-index:1;\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    height: 852px;\n    background-size: 100% 100%;\n    &.not-start{\n      background-image: url(../../assets/detail/pic-purse-1.png);\n    }\n\n    &.ended{\n      background-image: url(../../assets/detail/pic-purse-2.png);\n    } \n  }\n\n  .my-prize-mask{\n    position: fixed;\n    top: 0;\n    left: 0;\n    background-color: rgba(0,0,0,.6);\n    width: 100%;\n    height: 100%;\n    z-index: 3;\n    .my-prize-cont{\n      width: 650px;\n      height: 629px;\n      background-color: #f94823;\n      border-radius: 40px;\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n      padding-top: 97px;\n      box-sizing: border-box;\n      box-shadow: inset 0px 0px 25px rgba(255, 255, 255, .6);\n      .popup-title{\n        width: 396px;\n        height: 108px;\n        background-image: url(../../assets/user/pic-title-bg.png);\n        background-size: 100% 100%;\n        position: absolute;\n        top: -22px;\n        left: 50%;\n        transform: translateX(-50%);\n        text-align: center;\n        padding-top: 28px;\n        box-sizing: border-box;\n        font-size: 40px;\n        font-family: PingFangSC-Medium, PingFang SC;\n        font-weight: 500;\n        color: #ff2b39;\n        line-height: 44px;\n      }\n      .popup-close{\n        position: absolute;\n        bottom: -89px;\n        left: 50%;\n        transform: translateX(-50%);\n        width: 50px;\n        height: 50px;\n        background-image: url(../../assets/common/icon-close.png);\n        background-size: 100% 100%;\n      }\n\n      .popup-cont-mask{\n        width: 611px;\n        height: 511px;\n        background-color: #ffeddb;\n        border-radius: 20px;\n        margin: 0 auto;\n        overflow: hidden;\n        padding: 48px 30px;\n        box-sizing: border-box;\n        .prize-list{\n          width: 631px;\n          height: 100%;\n          padding-right: 50px;\n          overflow-y: auto;\n          box-sizing: border-box;\n          overflow-x: hidden;\n          li{\n            width: 551px;\n            max-width: 551px;\n            display: flex;\n            align-items: center;\n            justify-content: space-between;\n            margin-top: 40px;\n            box-sizing: border-box;\n            &:first-child{\n              margin: 0;\n            }\n            span{\n              font-size: 30px;\n              font-weight: normal;\n              font-stretch: normal;\n              line-height: 34px;\n              letter-spacing: 0px;\n              color: #0f0301;\n              text-overflow:ellipsis;  \n              overflow: hidden;  \n              white-space: nowrap;\n              &:nth-of-type(1){\n                width: 190px;\n                color: #f94823;\n              }\n              &:nth-of-type(2){\n                width: 180px;\n                text-align: right;\n              }\n            }\n          }\n        }\n\n        .default-page{\n          width: 100%;\n          height: 100%;\n          position: relative;\n          p{\n            width: 100%;\n            position: absolute;\n            top: 50%;\n            transform: translateY(-50%);\n            text-align: center;\n            box-sizing: border-box;\n            font-size: 40px;\n            font-family: PingFangSC-Medium, PingFang SC;\n            font-weight: 500;\n            color: #f94823;\n            line-height: 48px;\n          }\n        }\n      }\n    }\n  }\n}\n\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[2]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[2]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=1ec39d5e&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=1ec39d5e&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1ec39d5e\",\n  null\n  \n)\n\nexport default component.exports","var map = {\n\t\"./icon-1.png\": 5729,\n\t\"./icon-2.png\": 1828,\n\t\"./icon-3.png\": 4415,\n\t\"./icon-4.png\": 5401,\n\t\"./icon-prize.png\": 662\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 1982;"],"names":["render","_vm","this","_c","_self","_setupProxy","staticClass","info","status","attrs","remainder","on","activityEndFun","_e","require","_v","_s","startTimeStr","_m","openMyPrizeFun","toRule","class","directives","name","rawName","value","myPrizeFlag","expression","$event","myPrizeList","length","_l","item","key","id","hittime","slice","staticRenderFns","countdownFlag","countdownIndex","remainderTime","ref","gameList","style","left","transform","scale","rotate","receiveFun","Activity","Vue","constructor","args","_defineProperty","mounted","getUserInfo","beforeDestroy","clearInterval","countdownTime","time","axios","get","then","res","data","code","userInfo","localStorage","getItem","$route","query","gameFun","countdownFun","setItem","$router","push","getActivityTime","setInterval","delId","currIndex","Math","floor","random","setTimeout","filter","v1","num","ceil","$emit","event","receiveDom","target","animation","gameCont","document","getElementsByClassName","newDom","createElement","className","top","offsetTop","offsetLeft","innerHTML","appendChild","removeChild","__decorate","Prop","Component","component","Detail","currId","getGameInfo","now","currTime","Date","getTime","startTime","starttime","endTime","endtime","moment","format","totalNum","items","components","GoBack","map","webpackContext","req","webpackContextResolve","__webpack_require__","o","e","Error","keys","Object","resolve","module","exports"],"sourceRoot":""}